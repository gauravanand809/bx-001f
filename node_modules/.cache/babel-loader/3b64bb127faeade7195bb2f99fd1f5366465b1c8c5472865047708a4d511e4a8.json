{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Container,Table,Button}from'react-bootstrap';import{useNavigate}from'react-router-dom';import'./allQueries.style.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllQueries=()=>{const navigate=useNavigate();const[queries,setQueries]=useState([]);useEffect(()=>{axios.get('/api/tickets?sort=-createdAt').then(response=>{setQueries(response.data);}).catch(error=>{console.error('Error fetching all queries:',error);});},[]);const handleViewDetails=id=>{navigate(\"/admin/query/\".concat(id));};return/*#__PURE__*/_jsxs(Container,{className:\"all-queries-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"all-queries-header\",children:\"All Queries\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sorting-buttons\"}),/*#__PURE__*/_jsx(\"div\",{className:\"all-queries-table-container\",children:/*#__PURE__*/_jsxs(Table,{className:\"all-queries-table\",bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Criticality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:queries.map(query=>{var _query$employeeId;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:query.createdAt?new Date(query.createdAt).toLocaleDateString('en-GB'):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:query.createdAt?new Date(query.createdAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true}):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:((_query$employeeId=query.employeeId)===null||_query$employeeId===void 0?void 0:_query$employeeId.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:query.priority||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:query.issueType||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:query.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{className:\"details-button\",onClick:()=>handleViewDetails(query._id),children:\"View Details\"})})]},query._id);})})]})})]});};export default AllQueries;","map":{"version":3,"names":["React","useEffect","useState","axios","Container","Table","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","AllQueries","navigate","queries","setQueries","get","then","response","data","catch","error","console","handleViewDetails","id","concat","className","children","bordered","hover","map","query","_query$employeeId","createdAt","Date","toLocaleDateString","toLocaleTimeString","hour","minute","hour12","employeeId","name","priority","issueType","status","onClick","_id"],"sources":["/home/gaurav/Downloads/ITCC-System-master/frontend/src/pages/admin/allQueries.page.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Container, Table, Button } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport './allQueries.style.css';\n\nconst AllQueries = () => {\n  const navigate = useNavigate();\n  const [queries, setQueries] = useState([]);\n\n  useEffect(() => {\n    axios.get('/api/tickets?sort=-createdAt')\n      .then(response => {\n        setQueries(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching all queries:', error);\n      });\n  }, []);\n\n  const handleViewDetails = (id) => {\n    navigate(`/admin/query/${id}`);\n  };\n\n  return (\n    <Container className=\"all-queries-page\">\n      <h1 className=\"all-queries-header\">All Queries</h1>\n      <div className=\"sorting-buttons\">\n        {/* Removed extra buttons for sorting */}\n      </div>\n      <div className=\"all-queries-table-container\">\n        <Table className=\"all-queries-table\" bordered hover>\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Time</th>\n              <th>Name</th>\n              <th>\n                Criticality\n              </th>\n              <th>Type</th>\n              <th>\n                Status\n              </th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {queries.map((query) => (\n              <tr key={query._id}>\n                <td>{query.createdAt ? new Date(query.createdAt).toLocaleDateString('en-GB') : 'N/A'}</td>\n                <td>{query.createdAt ? new Date(query.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true }) : 'N/A'}</td>\n                <td>{query.employeeId?.name || 'N/A'}</td>\n                <td>{query.priority || 'N/A'}</td>\n                <td>{query.issueType || 'N/A'}</td>\n                <td>{query.status}</td>\n                <td>\n                  <Button\n                    className=\"details-button\"\n                    onClick={() => handleViewDetails(query._id)}\n                  >\n                    View Details\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </div>\n    </Container>\n  );\n};\n\nexport default AllQueries;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}