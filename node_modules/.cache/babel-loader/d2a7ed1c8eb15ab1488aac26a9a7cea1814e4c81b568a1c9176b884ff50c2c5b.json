{"ast":null,"code":"import _objectSpread from\"/home/gaurav/Downloads/ITCC-System-master/frontend/node_modules/.pnpm/@babel+runtime@7.27.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Container,Row,Col,Form,Button}from'react-bootstrap';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{toast}from'react-hot-toast';import'./login.comp.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({email:'',password:''});const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value.trimStart()}));};const handleSubmit=async e=>{e.preventDefault();if(!formData.email||!formData.password){toast.error('Both fields are required.');return;}try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_BASE_URL||'http://localhost:5000',\"/api/users/login\"),{email:formData.email.trim(),password:formData.password},{headers:{'Content-Type':'application/json'}});localStorage.setItem('token',response.data.token);navigate('/ticket');}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){toast.error('Incorrect password. Please try again.',{duration:5000});}else{var _err$response2,_err$response2$data;toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Login failed. Please try again.',{duration:5000});}}};return/*#__PURE__*/_jsx(Container,{className:\"login-container\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login-title\",children:\"Employee Login\"}),/*#__PURE__*/_jsxs(Form,{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formEmail\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",placeholder:\"Enter your email\",value:formData.email,onChange:handleChange,autoComplete:\"username\"})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formPassword\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",placeholder:\"Enter your password\",value:formData.password,onChange:handleChange,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"login-button\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-link\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up here\"})]})})]})})});};export default Login;","map":{"version":3,"names":["React","useState","Container","Row","Col","Form","Button","Link","useNavigate","axios","toast","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","navigate","handleChange","e","name","value","target","prev","_objectSpread","trimStart","handleSubmit","preventDefault","error","response","post","concat","process","env","REACT_APP_API_BASE_URL","trim","headers","localStorage","setItem","data","token","err","_err$response","status","duration","_err$response2","_err$response2$data","className","children","md","onSubmit","Group","controlId","Label","Control","type","placeholder","onChange","autoComplete","variant","to"],"sources":["/home/gaurav/Downloads/ITCC-System-master/frontend/src/components/login/login.comp.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-hot-toast';\nimport './login.comp.css';\n\nconst Login = () => {\n  const [formData, setFormData] = useState({ email: '', password: '' });\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value.trimStart(),\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!formData.email || !formData.password) {\n      toast.error('Both fields are required.');\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000'}/api/users/login`,\n        {\n          email: formData.email.trim(),\n          password: formData.password,\n        },\n        { headers: { 'Content-Type': 'application/json' } }\n      );\n\n      localStorage.setItem('token', response.data.token);\n      navigate('/ticket');\n    } catch (err) {\n      if (err.response?.status === 401) {\n        toast.error('Incorrect password. Please try again.', { duration: 5000 });\n      } else {\n        toast.error(err.response?.data?.error || 'Login failed. Please try again.', { duration: 5000 });\n      }\n    }\n  };\n\n  return (\n    <Container className=\"login-container\">\n      <Row className=\"justify-content-center\">\n        <Col md={6}>\n          <h1 className=\"login-title\">Employee Login</h1>\n          <Form className=\"login-form\" onSubmit={handleSubmit}>\n            <Form.Group controlId=\"formEmail\" className=\"mb-3\">\n              <Form.Label>Email address</Form.Label>\n              <Form.Control\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={handleChange}\n                autoComplete=\"username\"\n              />\n            </Form.Group>\n            <Form.Group controlId=\"formPassword\" className=\"mb-3\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Enter your password\"\n                value={formData.password}\n                onChange={handleChange}\n                autoComplete=\"current-password\"\n              />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\" className=\"login-button\">\n              Login\n            </Button>\n          </Form>\n          <div className=\"signup-link\">\n            <p>\n              Don't have an account? <Link to=\"/signup\">Sign up here</Link>\n            </p>\n          </div>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}