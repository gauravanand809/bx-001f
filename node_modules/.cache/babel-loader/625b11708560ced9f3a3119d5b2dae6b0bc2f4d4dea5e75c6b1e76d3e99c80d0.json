{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{Container,Button}from'react-bootstrap';import'./admin.style.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const navigate=useNavigate();const[tickets,setTickets]=useState([]);useEffect(()=>{axios.get('/api/tickets?limit=10&sort=-createdAt').then(response=>{setTickets(response.data);}).catch(error=>{console.error('Error fetching tickets:',error);});},[]);const handleViewDetails=id=>{navigate(\"/admin/query/\".concat(id));};return/*#__PURE__*/_jsxs(Container,{className:\"admin-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-header\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"flex-end\",marginBottom:\"1rem\"},children:/*#__PURE__*/_jsx(Button,{className:\"details-button\",onClick:()=>navigate('/admin/all-queries'),children:\"Show All Queries\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Criticality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Details\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tickets.map(ticket=>{var _ticket$employeeId;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.createdAt?new Date(ticket.createdAt).toLocaleDateString('en-GB'):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:ticket.createdAt?new Date(ticket.createdAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true}):'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:((_ticket$employeeId=ticket.employeeId)===null||_ticket$employeeId===void 0?void 0:_ticket$employeeId.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:ticket.priority||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:ticket.issueType||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:ticket.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{className:\"details-button\",onClick:()=>handleViewDetails(ticket._id),children:\"View Details\"})})]},ticket._id);})})]})})]});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","Container","Button","jsx","_jsx","jsxs","_jsxs","Admin","navigate","tickets","setTickets","get","then","response","data","catch","error","console","handleViewDetails","id","concat","className","children","style","width","display","justifyContent","marginBottom","onClick","map","ticket","_ticket$employeeId","createdAt","Date","toLocaleDateString","toLocaleTimeString","hour","minute","hour12","employeeId","name","priority","issueType","status","_id"],"sources":["/home/gaurav/Downloads/ITCC-System-master/frontend/src/pages/admin/admin.page.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Button } from 'react-bootstrap';\nimport './admin.style.css'; \n\nconst Admin = () => {\n  const navigate = useNavigate();\n  const [tickets, setTickets] = useState([]);\n\n  useEffect(() => {\n    axios.get('/api/tickets?limit=10&sort=-createdAt')\n      .then(response => {\n        setTickets(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching tickets:', error);\n      });\n  }, []);\n\n  const handleViewDetails = (id) => {\n    navigate(`/admin/query/${id}`);\n  };\n\n  return (\n    <Container className=\"admin-page\">\n      <h1 className=\"admin-header\">Admin Dashboard</h1>\n      <div style={{ width: \"100%\", display: \"flex\", justifyContent: \"flex-end\", marginBottom: \"1rem\" }}>\n        <Button className=\"details-button\" onClick={() => navigate('/admin/all-queries')}>\n          Show All Queries\n        </Button>\n      </div>\n      <div className=\"admin-table-container\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Time</th>\n              <th>Name</th>\n              <th>\n                Criticality\n              </th>\n              <th>Type</th>\n              <th>\n                Status\n              </th>\n              <th>Details</th>\n            </tr>\n          </thead>\n          <tbody>\n            {tickets.map((ticket) => (\n              <tr key={ticket._id}>\n                <td>{ticket.createdAt ? new Date(ticket.createdAt).toLocaleDateString('en-GB') : 'N/A'}</td>\n                <td>{ticket.createdAt ? new Date(ticket.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true }) : 'N/A'}</td>\n                <td>{ticket.employeeId?.name || 'N/A'}</td>\n                <td>{ticket.priority || 'N/A'}</td>\n                <td>{ticket.issueType || 'N/A'}</td>\n                <td>{ticket.status}</td>\n                <td>\n                  <Button\n                    className=\"details-button\"\n                    onClick={() => handleViewDetails(ticket._id)}\n                  >\n                    View Details\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </Container>\n  );\n};\n\nexport default Admin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}